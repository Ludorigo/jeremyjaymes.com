machine:
  environment:
    HUGO_VERSION: 0.20.7

dependencies:
  cache_directories:
    - ~/bin
  override:
    - if [[ ! -e ~/bin/hugo ]]; then wget https://github.com/spf13/hugo/releases/download/v${HUGO_VERSION}/hugo_${HUGO_VERSION}_Linux-64bit.tar.gz && tar xzvf hugo_${HUGO_VERSION}_Linux-64bit.tar.gz && mv hugo ${HOME}/bin/ && rm -rf hugo_${HUGO_VERSION}_Linux-64bit.tar.gz; fi

test:
  override:
    - hugo -v

deployment:
  aws:
    branch: master
    commands:
    - make